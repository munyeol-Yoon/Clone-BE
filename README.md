# 항해 클론프로젝트 : 소개집

## 기획

'소개집'은 인기있는 인테리어 플랫폼인 <오늘의집>의 클론 프로젝트입니다. 대중적이고 실용적인 UI, UX를 탐색하며 다양한 기능 구현에 도전하였습니다. 이 플랫폼의 고유한 공간 기능을 재현하기 위한 많은 분석을 거쳐 구현하였고, 이를 통해 실제 서비스에 가까운 경험을 쌓으며 풍부한 기능성과 실용성을 강조하면서도 소개집 특유의 재해석을 녹여내 보았습니다.

오늘의 집(원본) : [오늘의 집 링크](https://ohou.se/)

서비스 링크 : [소개집](https://flatland.shop/)

API 명세서 : [명세서](https://docs.google.com/spreadsheets/d/18N-oHqhDXmBjzYYKPYeN8ghFRAOXBLCZdJJ8N4JHpjg/edit?usp=sharing)

시연 영상 링크 : [Youtube](https://www.youtube.com/watch?v=xDSjSDFg9yM)

FE-Repository : https://github.com/CowDogHome/Clone-FE

BE-Repository : https://github.com/CowDogHome/Clone-BE

## 아키텍처

![아키텍처](/아키텍처.png)

## ERD

![ERD](/Clone_ERD.png)

## 기술 스택

![](https://camo.githubusercontent.com/7d7b100e379663ee40a20989e6c61737e6396c1dafc3a7c6d2ada8d4447eb0e4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6e6f64652e6a732d3644413535463f7374796c653d666f722d7468652d6261646765266c6f676f3d6e6f64652e6a73266c6f676f436f6c6f723d7768697465)![](https://camo.githubusercontent.com/5f06192d3f3c5bcd392b6936d8c3c40d4c6aad18920bc7abf67c11f5ccfd4942/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f657870726573732d3030303030303f7374796c653d666f722d7468652d6261646765266c6f676f3d65787072657373266c6f676f436f6c6f723d7768697465)![](https://camo.githubusercontent.com/d8ac4c7a04a98fe1c0c982f18f0522c58e5cdee512e94a57d3d552dad6eb3bd8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4a534f4e2057656220546f6b656e732d3030303030303f7374796c653d666f722d7468652d6261646765266c6f676f3d4a534f4e2057656220546f6b656e73266c6f676f436f6c6f723d7768697465)

![](https://camo.githubusercontent.com/97ab783ee5c3992b11126cce973670e336acc4e71829dd0ad39aa339a43b771b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f676974687562616374696f6e732d3230383846462e7376673f7374796c653d666f722d7468652d6261646765266c6f676f3d676974687562616374696f6e73266c6f676f436f6c6f723d7768697465)![](https://camo.githubusercontent.com/cf5c1e40095f0f323b7763d51da79ec685aaf6856d2d1d1c87bae70b6b194b97/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d616d617a6f6e73332d4542303031423f7374796c653d666f722d7468652d6261646765266c6f676f3d616d617a6f6e7333266c6f676f436f6c6f723d7768697465)![](https://camo.githubusercontent.com/4562c2cf5e2f49554c7c82ece5b905d8982e57951aa3a7966467022733b2d374/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d616d617a6f6e6563322d4646393930303f7374796c653d666f722d7468652d6261646765266c6f676f3d616d617a6f6e656332266c6f676f436f6c6f723d7768697465)![](https://camo.githubusercontent.com/76cd4c8e806c489ba3947bd2cb881e2e52c76f0a0038bee37d46fee94c6175a1/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d41575320436f64654465706c6f792d3542413734353f7374796c653d666f722d7468652d6261646765266c6f676f3d41575320436f64654465706c6f79266c6f676f436f6c6f723d7768697465)![](https://camo.githubusercontent.com/933c97f50caaea4aaca1ac2f6bf306446ff6df4291ce0a70965ab0d11acd4385/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d4e67696e782d677265656e3f7374796c653d666f722d7468652d6261646765266c6f676f3d4e67696e78266c6f676f436f6c6f723d7768697465)

![](https://camo.githubusercontent.com/41a19c1f24581c8c317a881a47582c6d73af2b20e0f6b9aab7ec0bb43ddba88b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d616d617a6f6e7264732d3532374646463f7374796c653d666f722d7468652d6261646765266c6f676f3d616d617a6f6e726473266c6f676f436f6c6f723d7768697465)![](https://camo.githubusercontent.com/124c378aa588501ba68fa7878eb2eec94f2e443f7c6a94c562e66cdc4d617b1b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d6d7973716c2d626c75653f7374796c653d666f722d7468652d6261646765266c6f676f3d4d7973716c266c6f676f436f6c6f723d7768697465)![](https://camo.githubusercontent.com/50c8dacf8a3468b5c4150b154d41c0d5a4c95ab11a2e3a589bb2a86a9e110bc3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d73657175656c697a652d626c75653f7374796c653d666f722d7468652d6261646765266c6f676f3d53657175656c697a65266c6f676f436f6c6f723d7768697465)

## 폴더 구조

```
📦clone-BE
 ┣ 📂.github/workflows
 ┃ ┗ 📜node.js.yml
 ┣ 📂config
 ┃ ┗ 📜config.js
 ┣ 📂controllers
 ┃ ┣ 📜detail.controller.js
 ┃ ┣ 📜itempage.controller.js
 ┃ ┣ 📜login.controller.js
 ┃ ┣ 📜main.controller.js
 ┃ ┣ 📜register.controller.js
 ┃ ┗ 📜userinfo.controller.js
 ┣ 📂middlewares
 ┃ ┣ 📜auth-middleware.js
 ┃ ┣ 📜multer-middleware.js
 ┣ 📂migrations
 ┃ ┣ 📜migrations/20230721120925-create-users.js
 ┃ ┣ 📜migrations/20230721120926-create-item-pages.js
 ┃ ┣ 📜migrations/20230721120927-create-detail-pages.js
 ┃ ┣ 📜migrations/20230721121007-create-writepacks.js
 ┃ ┣ 📜migrations/20230722141147-create-color-options.js
 ┃ ┣ 📜migrations/20230722143308-create-size-options.js
 ┃ ┣ 📜migrations/20230723120612-create-item-img-lists.js
 ┃ ┗ 📜migrations/20230725110612-fix-users.email.js
 ┣ 📂models
 ┃ ┣ 📜coloroptions.js
 ┃ ┣ 📜detailpages.js
 ┃ ┣ 📜index.js
 ┃ ┣ 📜itemimglists.js
 ┃ ┣ 📜itempages.js
 ┃ ┣ 📜sizeoptions.js
 ┃ ┣ 📜users.js
 ┃ ┗ 📜writepacks.js
 ┣ 📂passport
 ┃ ┣ 📜kakao-passport.js
 ┃ ┗ 📜local-passport.js
 ┣ 📂repositories
 ┃ ┣ 📜detail.repository.js
 ┃ ┣ 📜itempage.repository.js
 ┃ ┣ 📜login.repository.js
 ┃ ┣ 📜main.repository.js
 ┃ ┣ 📜register.repository.js
 ┃ ┗ 📜userinfo.repository.js
 ┣ 📂routes
 ┃ ┣ 📜detail.js
 ┃ ┣ 📜index.js
 ┃ ┣ 📜itempage.js
 ┃ ┣ 📜login.js
 ┃ ┣ 📜main.js
 ┃ ┣ 📜register.js
 ┃ ┗ 📜userinfo.js
 ┣ 📂scripts
 ┃ ┣ 📜after_deploy.sh
 ┃ ┗ 📜before_deploy.sh
 ┣ 📂services
 ┃ ┣ 📜detail.service.js
 ┃ ┣ 📜itempage.service.js
 ┃ ┣ 📜login.service.js
 ┃ ┣ 📜main.service.js
 ┃ ┣ 📜register.service.js
 ┃ ┗ 📜userinfo.service.js
 ┣ 📂utils
 ┃ ┗ 📜error.utils.js
 ┣ 📂validations
 ┃ ┣ 📜auth.validation.js
 ┃ ┣ 📜detail.validation.js
 ┃ ┗ 📜itempage.validation.js
 ┣ 📜.gitignore
 ┣ 📜README.md
 ┣ 📜app.js
 ┣ 📜appspec.yml
 ┣ 📜Clone_ERD.png
 ┣ 📜package-lock.json
 ┗ 📜package.json
```

트러블슈팅 및 기술의사결정 : [Technical Spec](https://hungry-mascara-804.notion.site/7-Technical-Specification-d291d45a118e4a878cc75c486ce66e3f?pvs=4)

## 🔧 기술적 의사 결정

| 사용 기술      | 기술 설명                                                                                                                                                                                                                                                                                                                                   |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Passport**   | - 다양한 로그인 인증 전략 지원 및 효율성 상승 </br>- Strategy 개념 구현으로 필요한 로그인 방식 채택 가능 </br>- Facebook, Google, Twitter 등의 소셜로그인 및 다양한 인증방법을 통일된 API로 사용 </br> - req.user 생성 및 세션 검증 자동 처리 지원 </br>- express-session 이용 > 세션 정보 메모리 저장                                      |
| **Multer-S3**  | - AWS S3에 파일 업로드를 보다 편리하게 만드는 라이브러리 > Multer와 AWS S3의 결합으로 원활한 파일 업로드 가능 </br> - 대용량 파일 및 이미지 저장시 적합하며, CDN을 통한 빠른 리소스 제공 가능 </br> - AWS S3에 직접 파일을 업로드하여 서버 부하 최적화 </br> - AWS S3와의 통합을 통해 클라우드 기반 스토리지에 대한 원활한 파일 업로드 가능 |
| **Git Action** | - “프로젝트 스코프”에 따른 통합성과 접근성 </br> - 별도 설치/인프라 확장/운영/문서(리소스) 관리 등에 대한 고려 불필요 </br> - GitHub에서 전체 관리 가능 </br> - 설정 정형화 > 접근성▲                                                                                                                                                       |
| **Nginx**      | - 비동기 방식을 통해 버퍼 오버플로우 예방과 높은 효율성 보장 </br> - 병렬 처리 속도가 빠르고 안정적이라 Apache 대비 높은 성능 제공 </br> - SSL 인증 지원으로 보안성 확보 </br> - 포트 리다이렉션으로 사용자 요청 안전처리 및 정확도가 향상된 결과 제공                                                                                      |
| **Joi**        | - 라이브러리 내 메서드를 통한 에러메시지 커스터마이징의 용이성 </br> - 여러 필드를 한 번에 검증 가능하여 스키마 검증 상 높은 용이성 </br> - 데이터 변환의 유연성 및 Null 변환 및 허용에 대한 용이성 </br> - 복잡한 데이터 유효성 검사에 효과적                                                                                              |
| **Bcrypt**     | - 데이터베이스 유출 시 평문 비밀번호의 계정보안 위협 방지 </br> - 사용자 게시글 무단 수정 방지를 위해 비밀번호 해싱으로 보안 강화 </br> - 비교적 낮은 메모리 사용량에 비해 솔트를 활용한 높은 보안성, 직관적 코드사용으로 높은 접근성                                                                                                       |

## 🧨 트러블 슈팅

<details>
<summary>로그인 요청 실패 및 입력 이벤트 문제</summary>

  <br>
  
**`문제`**
JWT 토큰을 Header에서 제대로 불러오지 못하는 문제가 발생. 이는 서버가 HTTP 헤더의 필드 이름을 대소문자에 민감하게 처리하였기 때문이었음.

**`해결`**
HTTP 헤더 필드 이름은 대소문자를 구분하지 않는 점을 활용하였음. 즉, "Authorization", "authorization", "AUTHORIZATION" 등은 모두 동일하게 취급됨. 따라서, req.headers.Cowdog 를 req.headers.cowdog 로 수정하여 문제를 해결함.

</details>

<details>
<summary>디테일 POST 요청 시 WritePacks 데이터 저장 문제</summary>

  <br>
  
**`문제`**
디테일 POST 요청을 처리하면서, WritePacks에도 데이터가 저장되어야 함. 그러나 아이템 정보 혹은 좌표에서 문제가 발생하면 디테일 데이터만 생성되는 문제 발생.

**`해결`**
HTTP 헤더 필드 이름은 대소문자를 구분하지 않는 점을 활용하였음. 즉, "Authorization", "authorization", "AUTHORIZATION" 등은 모두 동일하게 취급됨. 따라서, req.headers.Cowdog 를 req.headers.cowdog 로 수정하여 문제를 해결함.

</details>

## 👨‍👩‍👧 구성원

| 역할     | 이름   | 분담                                              | 깃허브                            |
| -------- | ------ | ------------------------------------------------- | --------------------------------- |
| BE(팀장) | 정소채 | S3 이미지 업로드, 프로젝트 관리 총괄 및 서브 코더 | https://github.com/GabrielaJeong  |
| FE       | 김태현 | 집사진 아티클 상세 생성창, 조회창, 이미지 업로드  | https://github.com/taehyunkim3    |
| FE       | 임하루 | 메인페이지, 상품 상세 페이지                      | https://github.com/Haru-Im        |
| FE       | 강경원 | 회원가입, 로그인 (소셜로그인) 기능                | https://github.com/Kang-Gyeongwon |
| BE       | 윤문열 | CI/CD 구축, HTTPS 구축, 회원가입, 로그인          | https://github.com/munyeol-Yoon   |
| BE       | 문정민 | 메인 페이지, 집사진 페이지 CRUD, 좌표, 트랜잭션   | https://github.com/mjm7542        |
| BE       | 이상한 | 상품페이지 CRUD, 데이터베이스 관리                | https://github.com/tkdgks7036     |
